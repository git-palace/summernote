/*! Summernote v0.7.0 | (c) 2013-2015 Alan Hong and other contributors | MIT license */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){var b=function(){var b=function(a){return function(b){return a===b}},c=function(a,b){return a===b},d=function(a){return function(b,c){return b[a]===c[a]}},e=function(){return!0},f=function(){return!1},g=function(a){return function(){return!a.apply(a,arguments)}},h=function(a,b){return function(c){return a(c)&&b(c)}},i=function(a){return a},j=0,k=function(a){var b=++j+"";return a?a+b:b},l=function(b){var c=a(document);return{top:b.top+c.scrollTop(),left:b.left+c.scrollLeft(),width:b.right-b.left,height:b.bottom-b.top}},m=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b},n=function(a,b){return b=b||"",b+a.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")};return{eq:b,eq2:c,peq2:d,ok:e,fail:f,self:i,not:g,and:h,uniqueId:k,rect2bnd:l,invertObject:m,namespaceToCamel:n}}(),c=function(){var c=function(a){return a[0]},d=function(a){return a[a.length-1]},e=function(a){return a.slice(0,a.length-1)},f=function(a){return a.slice(1)},g=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(b(e))return e}},h=function(a,b){for(var c=0,d=a.length;d>c;c++)if(!b(a[c]))return!1;return!0},i=function(b,c){return a.inArray(c,b)},j=function(a,b){return-1!==i(a,b)},k=function(a,c){return c=c||b.self,a.reduce(function(a,b){return a+c(b)},0)},l=function(a){for(var b=[],c=-1,d=a.length;++c<d;)b[c]=a[c];return b},m=function(a,b){if(!a.length)return[];var e=f(a);return e.reduce(function(a,c){var e=d(a);return b(d(e),c)?e[e.length]=c:a[a.length]=[c],a},[[c(a)]])},n=function(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c]&&b.push(a[c]);return b},o=function(a){for(var b=[],c=0,d=a.length;d>c;c++)j(b,a[c])||b.push(a[c]);return b},p=function(a,b){var c=i(a,b);return-1===c?null:a[c+1]},q=function(a,b){var c=i(a,b);return-1===c?null:a[c-1]};return{head:c,last:d,initial:e,tail:f,prev:q,next:p,find:g,contains:j,all:h,sum:k,from:l,clusterBy:m,compact:n,unique:o}}(),d=function(d,e){var f=this,g=a.summernote.ui;return this.modules={},this.layoutInfo={},this.options=e,this.initialize=function(){return this.layoutInfo=g.createLayout(d),Object.keys(this.options.modules).forEach(function(a){var b=new f.options.modules[a](f);b.initialize&&b.initialize.apply(b),f.addModule(a,b)}),d.hide(),this.triggerEvent("ready"),this},this.destroy=function(){Object.keys(this.modules).forEach(function(a){f.removeModule(a)}),g.removeLayout(d,this.layoutInfo)},this.code=function(a){if(void 0===a){var b=this.invoke("codeview.isActivated");return this.invoke("codeview.sync"),b?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}this.layoutInfo.editable.html(a)},this.triggerEvent=function(){var a=c.head(arguments),e=c.tail(c.from(arguments)),f=this.options.callbacks[b.namespaceToCamel(a,"on")];f&&f.apply(d[0],e),d.trigger("summernote."+a,e)},this.removeLayout=function(a){a.editor.remove()},this.addModule=function(a,b){this.modules[a]=b},this.removeModule=function(a){this.modules[a].destroy&&this.modules[a].destroy(),delete this.modules[a]},this.createInvokeHandler=function(b,c){return function(d){d.preventDefault(),f.invoke(b,c||a(d.target).data("value"))}},this.invoke=function(){var a=c.head(arguments),b=c.tail(c.from(arguments)),d=a.split("."),e=d.length>1,f=e&&c.head(d),g=e?c.last(d):c.head(d),h=this.modules[f];return h&&h[g]?h[g].apply(h,b):this[g]?this[g].apply(this,b):void 0},this.initialize()};a.summernote=a.summernote||{lang:{}},a.fn.extend({summernote:function(){var b=a.type(c.head(arguments)),e="string"===b,f="object"===b,g=f?c.head(arguments):{};g=a.extend({},a.summernote.options,g),g.langInfo=a.extend(!0,{},a.summernote.lang["en-US"],a.summernote.lang[g.lang]),this.each(function(b,c){var e=a(c);e.data("summernote")||e.data("summernote",new d(e,g))});var h=this.first();if(e&&h.length){var i=h.data("summernote");return i.invoke.apply(i,c.from(arguments))}}});var e,f=function(b,c,d,e){this.render=function(f){var g=a(b);if(d&&d.contents&&g.html(d.contents),d&&d.className&&g.addClass(d.className),d&&d.data&&a.each(d.data,function(a,b){g.attr("data-"+a,b)}),d&&d.click&&g.on("mousedown",d.click),c){var h=g.find(".note-children-container");c.forEach(function(a){a.render(h.length?h:g)})}return e&&e(g,d),d&&d.callback&&d.callback(g),f&&f.append(g),g}},g={create:function(b,c){return function(){var d=a.isArray(arguments[0])?arguments[0]:[],e="object"==typeof arguments[1]?arguments[1]:arguments[0];return e&&e.children&&(d=e.children),new f(b,d,e,c)}}},h=g.create('<div class="note-editor panel panel-default"/>'),i=g.create('<div class="note-toolbar panel-heading"/>'),j=g.create('<div class="note-editing-area"/>'),k=g.create('<textarea class="note-codable"/>'),l=g.create('<div class="note-editable panel-body" contentEditable="true"/>'),m=g.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),n=g.create('<div class="note-btn-group btn-group">'),o=g.create('<button class="note-btn btn btn-default btn-sm">',function(a,b){b&&b.tooltip&&a.attr({title:b.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),p=g.create('<div class="dropdown-menu">',function(b,c){var d=a.isArray(c.items)?c.items.map(function(a){return'<li><a href="#" data-value="'+a+'">'+a+"</a></li>"}).join(""):c.items;b.html(d)}),q=g.create('<div class="dropdown-menu note-check">',function(b,c){var d=a.isArray(c.items)?c.items.map(function(a){return'<li><a href="#" data-value="'+a+'"><i class="fa fa-check" /> '+a+"</a></li>"}).join(""):c.items;b.html(d)}),r=g.create('<div class="note-color-palette"/>',function(a,b){for(var c=[],d=0,e=b.colors.length;e>d;d++){for(var f=b.eventName,g=b.colors[d],h=[],i=0,j=g.length;j>i;i++){var k=g[i];h.push(['<button type="button" class="note-color-btn"','style="background-color:',k,'" ','data-event="',f,'" ','data-value="',k,'" ','title="',k,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}c.push('<div class="note-color-row">'+h.join("")+"</div>")}a.html(c.join("")),a.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),s=g.create('<div class="modal" aria-hidden="false"/>',function(a,b){a.html(['<div class="modal-dialog">','<div class="modal-content">',b.title?'<div class="modal-header"><button type="button" class="close" tabindex="-1">&times;</button><h4 class="modal-title">'+b.title+"</h4></div>":"",'<div class="modal-body">'+b.body+"</div>",b.footer?'<div class="modal-footer">'+b.footer+"</div>":"","</div>","</div>"].join(""))}),t=g.create(['<div class="note-popover popover bottom in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join("")),u={editor:h,toolbar:i,editingArea:j,codable:k,editable:l,statusbar:m,buttonGroup:n,button:o,dropdown:p,dropdownCheck:q,palette:r,dialog:s,popover:t,toggleBtn:function(a,b){a.toggleClass("disabled",!b),a.attr("disabled",!b)},toggleBtnActive:function(a,b){a.toggleClass("active",b)},onDialogShown:function(a,b){a.one("shown.bs.modal",b)},onDialogHidden:function(a,b){a.one("hidden.bs.modal",b)},showDialog:function(a){a.modal("show")},hideDialog:function(a){a.modal("hide")},createLayout:function(a){var b=u.editor([u.toolbar(),u.editingArea([u.codable(),u.editable()]),u.statusbar()]).render();return b.insertAfter(a),{note:a,editor:b,toolbar:b.find(".note-toolbar"),editingArea:b.find(".note-editing-area"),editable:b.find(".note-editable"),codable:b.find(".note-codable"),statusbar:b.find(".note-statusbar")}},removeLayout:function(a,b){a.html(b.editable.html()),b.editor.remove(),a.show()}},v="function"==typeof define&&define.amd,w=function(b){var c="Comic Sans MS"===b?"Courier New":"Comic Sans MS",d=a("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),e=d.css("fontFamily",c).width(),f=d.css("fontFamily",b+","+c).width();return d.remove(),e!==f},x=navigator.userAgent,y=/MSIE|Trident/i.test(x);if(y){var z=/MSIE (\d+[.]\d+)/.exec(x);z&&(e=parseFloat(z[1])),z=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(x),z&&(e=parseFloat(z[1]))}var A,B={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:y,isFF:/firefox/i.test(x),isWebkit:/webkit/i.test(x),isSafari:/safari/i.test(x),browserVersion:e,jqueryVersion:parseFloat(a.fn.jquery),isSupportAmd:v,isFontInstalled:w,isW3CRangeSupport:!!document.createRange},C=function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(b){return c.contains([a.BACKSPACE,a.TAB,a.ENTER,a.SPACe],b)},isMove:function(b){return c.contains([a.LEFT,a.UP,a.RIGHT,a.DOWN],b)},nameFromCode:b.invertObject(a),code:a}}(),D=String.fromCharCode(160),E="\ufeff",F=function(){var d=function(b){return b&&a(b).hasClass("note-editable")},e=function(b){return b&&a(b).hasClass("note-control-sizing")},f=function(b){var d;if(b.hasClass("note-air-editor")){var e=c.last(b.attr("id").split("-"));return d=function(b){return function(){return a(b+e)}},{editor:function(){return b},holder:function(){return b.data("holder")},editable:function(){return b},popover:d("#note-popover-"),handle:d("#note-handle-"),dialog:d("#note-dialog-")}}d=function(a,c){return c=c||b,function(){return c.find(a)}};var f=b.data("options"),g=f&&f.dialogsInBody?a(document.body):null;return{editor:function(){return b},holder:function(){return b.data("holder")},dropzone:d(".note-dropzone"),toolbar:d(".note-toolbar"),editable:d(".note-editable"),codable:d(".note-codable"),statusbar:d(".note-statusbar"),popover:d(".note-popover"),handle:d(".note-handle"),dialog:d(".note-dialog",g)}},g=function(b){var d=a(b).closest(".note-editor, .note-air-editor, .note-air-layout");if(!d.length)return null;var e;return e=d.is(".note-editor, .note-air-editor")?d:a("#note-editor-"+c.last(d.attr("id").split("-"))),f(e)},h=function(a){return a=a.toUpperCase(),function(b){return b&&b.nodeName.toUpperCase()===a}},i=function(a){return a&&3===a.nodeType},j=function(a){return a&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(a.nodeName.toUpperCase())},k=function(a){return d(a)?!1:a&&/^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase())},l=h("LI"),m=function(a){return k(a)&&!l(a)},n=h("TABLE"),o=function(a){return!(t(a)||p(a)||q(a)||k(a)||n(a)||s(a))},p=function(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())},q=h("HR"),r=function(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())},s=h("BLOCKQUOTE"),t=function(a){return r(a)||s(a)||d(a)},u=h("A"),v=function(a){return o(a)&&!!I(a,k)},w=function(a){return o(a)&&!I(a,k)},x=h("BODY"),y=function(a,b){return a.nextSibling===b||a.previousSibling===b},z=function(a,c){c=c||b.ok;var d=[];return a.previousSibling&&c(a.previousSibling)&&d.push(a.previousSibling),d.push(a),a.nextSibling&&c(a.nextSibling)&&d.push(a.nextSibling),d},A=B.isMSIE&&B.browserVersion<11?"&nbsp;":"<br>",C=function(a){return i(a)?a.nodeValue.length:a.childNodes.length},G=function(a){var b=C(a);return 0===b?!0:i(a)||1!==b||a.innerHTML!==A?c.all(a.childNodes,i)&&""===a.innerHTML?!0:!1:!0},H=function(a){j(a)||C(a)||(a.innerHTML=A)},I=function(a,b){for(;a;){if(b(a))return a;if(d(a))break;a=a.parentNode}return null},J=function(a,b){for(a=a.parentNode;a&&1===C(a);){if(b(a))return a;if(d(a))break;a=a.parentNode}return null},K=function(a,c){c=c||b.fail;var e=[];return I(a,function(a){return d(a)||e.push(a),c(a)}),e},L=function(a,b){var d=K(a);return c.last(d.filter(b))},M=function(b,c){for(var d=K(b),e=c;e;e=e.parentNode)if(a.inArray(e,d)>-1)return e;return null},N=function(a,c){c=c||b.fail;for(var d=[];a&&!c(a);)d.push(a),a=a.previousSibling;return d},O=function(a,c){c=c||b.fail;for(var d=[];a&&!c(a);)d.push(a),a=a.nextSibling;return d},P=function(a,c){var d=[];return c=c||b.ok,function e(b){a!==b&&c(b)&&d.push(b);for(var f=0,g=b.childNodes.length;g>f;f++)e(b.childNodes[f])}(a),d},Q=function(b,c){var d=b.parentNode,e=a("<"+c+">")[0];return d.insertBefore(e,b),e.appendChild(b),e},R=function(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a},S=function(b,c){return a.each(c,function(a,c){b.appendChild(c)}),b},T=function(a){return 0===a.offset},U=function(a){return a.offset===C(a.node)},V=function(a){return T(a)||U(a)},W=function(a,b){for(;a&&a!==b;){if(0!==$(a))return!1;a=a.parentNode}return!0},X=function(a,b){for(;a&&a!==b;){if($(a)!==C(a.parentNode)-1)return!1;a=a.parentNode}return!0},Y=function(a,b){return T(a)&&W(a.node,b)},Z=function(a,b){return U(a)&&X(a.node,b)},$=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},_=function(a){return!!(a&&a.childNodes&&a.childNodes.length)},aa=function(a,b){var c,e;if(0===a.offset){if(d(a.node))return null;c=a.node.parentNode,e=$(a.node)}else _(a.node)?(c=a.node.childNodes[a.offset-1],e=C(c)):(c=a.node,e=b?0:a.offset-1);return{node:c,offset:e}},ba=function(a,b){var c,e;if(C(a.node)===a.offset){if(d(a.node))return null;c=a.node.parentNode,e=$(a.node)+1}else _(a.node)?(c=a.node.childNodes[a.offset],e=0):(c=a.node,e=b?C(a.node):a.offset+1);return{node:c,offset:e}},ca=function(a,b){return a.node===b.node&&a.offset===b.offset},da=function(a){if(i(a.node)||!_(a.node)||G(a.node))return!0;var b=a.node.childNodes[a.offset-1],c=a.node.childNodes[a.offset];return b&&!j(b)||c&&!j(c)?!1:!0},ea=function(a,b){for(;a;){if(b(a))return a;a=aa(a)}return null},fa=function(a,b){for(;a;){if(b(a))return a;a=ba(a)}return null},ga=function(a){if(!i(a.node))return!1;var b=a.node.nodeValue.charAt(a.offset-1);return b&&" "!==b&&b!==D},ha=function(a,b,c,d){for(var e=a;e&&(c(e),!ca(e,b));){var f=d&&a.node!==e.node&&b.node!==e.node;e=ba(e,f)}},ia=function(a,c){var d=K(c,b.eq(a));return d.map($).reverse()},ja=function(a,b){for(var c=a,d=0,e=b.length;e>d;d++)c=c.childNodes.length<=b[d]?c.childNodes[c.childNodes.length-1]:c.childNodes[b[d]];return c},ka=function(a,b){var c=b&&b.isSkipPaddingBlankHTML,d=b&&b.isNotSplitEdgePoint;if(V(a)&&(i(a.node)||d)){if(T(a))return a.node;if(U(a))return a.node.nextSibling}if(i(a.node))return a.node.splitText(a.offset);var e=a.node.childNodes[a.offset],f=R(a.node.cloneNode(!1),a.node);return S(f,O(e)),c||(H(a.node),H(f)),f},la=function(a,c,d){var e=K(c.node,b.eq(a));return e.length?1===e.length?ka(c,d):e.reduce(function(a,b){return a===c.node&&(a=ka(c,d)),ka({node:b,offset:a?F.position(a):C(b)},d)}):null},ma=function(a,b){var d,e,f=b?k:t,g=K(a.node,f),h=c.last(g)||a.node;f(h)?(d=g[g.length-2],e=h):(d=h,e=d.parentNode);var i=d&&la(d,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b});return i||e!==a.node||(i=a.node.childNodes[a.offset]),{rightNode:i,container:e}},na=function(a){return document.createElement(a)},oa=function(a){return document.createTextNode(a)},pa=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){var d,e,f=[];for(d=0,e=a.childNodes.length;e>d;d++)f.push(a.childNodes[d]);for(d=0,e=f.length;e>d;d++)c.insertBefore(f[d],a)}c.removeChild(a)}},qa=function(a,b){for(;a&&!d(a)&&b(a);){var c=a.parentNode;pa(a),a=c}},ra=function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;var d=na(b);return a.style.cssText&&(d.style.cssText=a.style.cssText),S(d,c.from(a.childNodes)),R(d,a),pa(a),d},sa=h("TEXTAREA"),ta=function(a,b){var c=sa(a[0])?a.val():a.html();return b?c.replace(/[\n\r]/g,""):c},ua=function(b,c){var d=ta(b);if(c){var e=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;d=d.replace(e,function(a,b,c){c=c.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b,e=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(d||e?"\n":"")}),d=a.trim(d)}return d};return{NBSP_CHAR:D,ZERO_WIDTH_NBSP_CHAR:E,blank:A,emptyPara:"<p>"+A+"</p>",makePredByNodeName:h,isEditable:d,isControlSizing:e,buildLayoutInfo:f,makeLayoutInfo:g,isText:i,isVoid:j,isPara:k,isPurePara:m,isInline:o,isBlock:b.not(o),isBodyInline:w,isBody:x,isParaInline:v,isList:p,isTable:n,isCell:r,isBlockquote:s,isBodyContainer:t,isAnchor:u,isDiv:h("DIV"),isLi:l,isBR:h("BR"),isSpan:h("SPAN"),isB:h("B"),isU:h("U"),isS:h("S"),isI:h("I"),isImg:h("IMG"),isTextarea:sa,isEmpty:G,isEmptyAnchor:b.and(u,G),isClosestSibling:y,withClosestSiblings:z,nodeLength:C,isLeftEdgePoint:T,isRightEdgePoint:U,isEdgePoint:V,isLeftEdgeOf:W,isRightEdgeOf:X,isLeftEdgePointOf:Y,isRightEdgePointOf:Z,prevPoint:aa,nextPoint:ba,isSamePoint:ca,isVisiblePoint:da,prevPointUntil:ea,nextPointUntil:fa,isCharPoint:ga,walkPoint:ha,ancestor:I,singleChildAncestor:J,listAncestor:K,lastAncestor:L,listNext:O,listPrev:N,listDescendant:P,commonAncestor:M,wrap:Q,insertAfter:R,appendChildNodes:S,position:$,hasChildren:_,makeOffsetPath:ia,fromOffsetPath:ja,splitTree:la,splitPoint:ma,create:na,createText:oa,remove:pa,removeWhile:qa,replace:ra,html:ua,value:ta}}(),G=function(){var d=function(a,b){var d,e,f=a.parentElement(),g=document.body.createTextRange(),h=c.from(f.childNodes);for(d=0;d<h.length;d++)if(!F.isText(h[d])){if(g.moveToElementText(h[d]),g.compareEndPoints("StartToStart",a)>=0)break;e=h[d]}if(0!==d&&F.isText(h[d-1])){var i=document.body.createTextRange(),j=null;i.moveToElementText(e||f),i.collapse(!e),j=e?e.nextSibling:f.firstChild;var k=a.duplicate();k.setEndPoint("StartToStart",i);for(var l=k.text.replace(/[\r\n]/g,"").length;l>j.nodeValue.length&&j.nextSibling;)l-=j.nodeValue.length,j=j.nextSibling;j.nodeValue;b&&j.nextSibling&&F.isText(j.nextSibling)&&l===j.nodeValue.length&&(l-=j.nodeValue.length,j=j.nextSibling),f=j,d=l}return{cont:f,offset:d}},e=function(a){var d=function(a,e){var f,g;if(F.isText(a)){var h=F.listPrev(a,b.not(F.isText)),i=c.last(h).previousSibling;f=i||a.parentNode,e+=c.sum(c.tail(h),F.nodeLength),g=!i}else{if(f=a.childNodes[e]||a,F.isText(f))return d(f,0);e=0,g=!1}return{node:f,collapseToStart:g,offset:e}},e=document.body.createTextRange(),f=d(a.node,a.offset);return e.moveToElementText(f.node),e.collapse(f.collapseToStart),e.moveStart("character",f.offset),e},f=function(d,g,h,i){this.sc=d,this.so=g,this.ec=h,this.eo=i;var j=function(){if(B.isW3CRangeSupport){var a=document.createRange();return a.setStart(d,g),a.setEnd(h,i),a}var b=e({node:d,offset:g});return b.setEndPoint("EndToEnd",e({node:h,offset:i})),b};this.getPoints=function(){return{sc:d,so:g,ec:h,eo:i}},this.getStartPoint=function(){return{node:d,offset:g}},this.getEndPoint=function(){return{node:h,offset:i}},this.select=function(){var a=j();if(B.isW3CRangeSupport){var b=document.getSelection();b.rangeCount>0&&b.removeAllRanges(),b.addRange(a)}else a.select();return this},this.normalize=function(){var a=function(a,b){if(F.isVisiblePoint(a)&&!F.isEdgePoint(a)||F.isVisiblePoint(a)&&F.isRightEdgePoint(a)&&!b||F.isVisiblePoint(a)&&F.isLeftEdgePoint(a)&&b||F.isVisiblePoint(a)&&F.isBlock(a.node)&&F.isEmpty(a.node))return a;var c=F.ancestor(a.node,F.isBlock);if((F.isLeftEdgePointOf(a,c)||F.isVoid(F.prevPoint(a).node))&&!b||(F.isRightEdgePointOf(a,c)||F.isVoid(F.nextPoint(a).node))&&b){if(F.isVisiblePoint(a))return a;b=!b}var d=b?F.nextPointUntil(F.nextPoint(a),F.isVisiblePoint):F.prevPointUntil(F.prevPoint(a),F.isVisiblePoint);return d||a},b=a(this.getEndPoint(),!1),c=this.isCollapsed()?b:a(this.getStartPoint(),!0);return new f(c.node,c.offset,b.node,b.offset)},this.nodes=function(a,d){a=a||b.ok;var e=d&&d.includeAncestor,f=d&&d.fullyContains,g=this.getStartPoint(),h=this.getEndPoint(),i=[],j=[];return F.walkPoint(g,h,function(b){if(!F.isEditable(b.node)){var d;f?(F.isLeftEdgePoint(b)&&j.push(b.node),F.isRightEdgePoint(b)&&c.contains(j,b.node)&&(d=b.node)):d=e?F.ancestor(b.node,a):b.node,d&&a(d)&&i.push(d)}},!0),c.unique(i)},this.commonAncestor=function(){return F.commonAncestor(d,h)},this.expand=function(a){var b=F.ancestor(d,a),c=F.ancestor(h,a);if(!b&&!c)return new f(d,g,h,i);var e=this.getPoints();return b&&(e.sc=b,e.so=0),c&&(e.ec=c,e.eo=F.nodeLength(c)),new f(e.sc,e.so,e.ec,e.eo)},this.collapse=function(a){return a?new f(d,g,d,g):new f(h,i,h,i)},this.splitText=function(){var a=d===h,b=this.getPoints();return F.isText(h)&&!F.isEdgePoint(this.getEndPoint())&&h.splitText(i),F.isText(d)&&!F.isEdgePoint(this.getStartPoint())&&(b.sc=d.splitText(g),b.so=0,a&&(b.ec=b.sc,b.eo=i-g)),new f(b.sc,b.so,b.ec,b.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var b=this.splitText(),d=b.nodes(null,{fullyContains:!0}),e=F.prevPointUntil(b.getStartPoint(),function(a){return!c.contains(d,a.node)}),g=[];return a.each(d,function(a,b){var c=b.parentNode;e.node!==c&&1===F.nodeLength(c)&&g.push(c),F.remove(b,!1)}),a.each(g,function(a,b){F.remove(b,!1)}),new f(e.node,e.offset,e.node,e.offset).normalize()};var k=function(a){return function(){var b=F.ancestor(d,a);return!!b&&b===F.ancestor(h,a)}};this.isOnEditable=k(F.isEditable),this.isOnList=k(F.isList),this.isOnAnchor=k(F.isAnchor),this.isOnCell=k(F.isCell),this.isLeftEdgeOf=function(a){if(!F.isLeftEdgePoint(this.getStartPoint()))return!1;var b=F.ancestor(this.sc,a);return b&&F.isLeftEdgeOf(this.sc,b)},this.isCollapsed=function(){return d===h&&g===i},this.wrapBodyInlineWithPara=function(){if(F.isBodyContainer(d)&&F.isEmpty(d))return d.innerHTML=F.emptyPara,new f(d.firstChild,0,d.firstChild,0);var a=this.normalize();if(F.isParaInline(d)||F.isPara(d))return a;var e;if(F.isInline(a.sc)){var g=F.listAncestor(a.sc,b.not(F.isInline));e=c.last(g),F.isInline(e)||(e=g[g.length-2]||a.sc.childNodes[a.so])}else e=a.sc.childNodes[a.so>0?a.so-1:0];var h=F.listPrev(e,F.isParaInline).reverse();if(h=h.concat(F.listNext(e.nextSibling,F.isParaInline)),h.length){var i=F.wrap(c.head(h),"p");F.appendChildNodes(i,c.tail(h))}return this.normalize()},this.insertNode=function(a){var b=this.wrapBodyInlineWithPara().deleteContents(),c=F.splitPoint(b.getStartPoint(),F.isInline(a));return c.rightNode?c.rightNode.parentNode.insertBefore(a,c.rightNode):c.container.appendChild(a),a},this.pasteHTML=function(b){var d=a("<div></div>").html(b)[0],e=c.from(d.childNodes),f=this.wrapBodyInlineWithPara().deleteContents();return e.reverse().map(function(a){return f.insertNode(a)}).reverse()},this.toString=function(){var a=j();return B.isW3CRangeSupport?a.toString():a.text},this.getWordRange=function(a){var b=this.getEndPoint();if(!F.isCharPoint(b))return this;var c=F.prevPointUntil(b,function(a){return!F.isCharPoint(a)});return a&&(b=F.nextPointUntil(b,function(a){return!F.isCharPoint(a)})),new f(c.node,c.offset,b.node,b.offset)},this.bookmark=function(a){return{s:{path:F.makeOffsetPath(a,d),offset:g},e:{path:F.makeOffsetPath(a,h),offset:i}}},this.paraBookmark=function(a){return{s:{path:c.tail(F.makeOffsetPath(c.head(a),d)),offset:g},e:{path:c.tail(F.makeOffsetPath(c.last(a),h)),offset:i}}},this.getClientRects=function(){var a=j();return a.getClientRects()}};return{create:function(a,b,c,e){if(arguments.length)2===arguments.length&&(c=a,e=b);else if(B.isW3CRangeSupport){var g=document.getSelection();if(!g||0===g.rangeCount)return null;if(F.isBody(g.anchorNode))return null;var h=g.getRangeAt(0);a=h.startContainer,b=h.startOffset,c=h.endContainer,e=h.endOffset}else{var i=document.selection.createRange(),j=i.duplicate();j.collapse(!1);var k=i;k.collapse(!0);var l=d(k,!0),m=d(j,!1);F.isText(l.node)&&F.isLeftEdgePoint(l)&&F.isTextNode(m.node)&&F.isRightEdgePoint(m)&&m.node.nextSibling===l.node&&(l=m),a=l.cont,b=l.offset,c=m.cont,e=m.offset}return new f(a,b,c,e)},createFromNode:function(a){var b=a,c=0,d=a,e=F.nodeLength(d);return F.isVoid(b)&&(c=F.listPrev(b).length-1,b=b.parentNode),F.isBR(d)?(e=F.listPrev(d).length-1,d=d.parentNode):F.isVoid(d)&&(e=F.listPrev(d).length,d=d.parentNode),this.create(b,c,d,e)},createFromNodeBefore:function(a){return this.createFromNode(a).collapse(!0)},createFromNodeAfter:function(a){return this.createFromNode(a).collapse()},createFromBookmark:function(a,b){var c=F.fromOffsetPath(a,b.s.path),d=b.s.offset,e=F.fromOffsetPath(a,b.e.path),g=b.e.offset;return new f(c,d,e,g)},createFromParaBookmark:function(a,b){var d=a.s.offset,e=a.e.offset,g=F.fromOffsetPath(c.head(b),a.s.path),h=F.fromOffsetPath(c.last(b),a.e.path);return new f(g,d,h,e)}}}(),H=function(){var b=function(b){return a.Deferred(function(c){a.extend(new FileReader,{onload:function(a){var b=a.target.result;c.resolve(b)},onerror:function(){c.reject(this)}}).readAsDataURL(b)}).promise()},c=function(b,c){return a.Deferred(function(d){var e=a("<img>");e.one("load",function(){e.off("error abort"),d.resolve(e)}).one("error abort",function(){e.off("load").detach(),d.reject(e)}).css({display:"none"}).appendTo(document.body).attr({src:b,"data-filename":c})}).promise()};return{readFileAsDataURL:b,createImage:c}}(),I=function(a){var b=[],c=-1,d=a[0],e=function(){var b=G.create(),c={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:a.html(),bookmark:b?b.bookmark(d):c}},f=function(b){null!==b.contents&&a.html(b.contents),null!==b.bookmark&&G.createFromBookmark(d,b.bookmark).select()};this.undo=function(){a.html()!==b[c].contents&&this.recordUndo(),c>0&&(c--,f(b[c]))},this.redo=function(){b.length-1>c&&(c++,f(b[c]))},this.recordUndo=function(){c++,b.length>c&&(b=b.slice(0,c)),b.push(e())},this.recordUndo()},J=function(){var d=function(b,c){if(B.jqueryVersion<1.9){var d={};return a.each(c,function(a,c){d[c]=b.css(c)}),d}return b.css.call(b,c)};this.fromNode=function(a){var b=["font-family","font-size","text-align","list-style-type","line-height"],c=d(a,b)||{};return c["font-size"]=parseInt(c["font-size"],10),c},this.stylePara=function(b,c){a.each(b.nodes(F.isPara,{includeAncestor:!0}),function(b,d){a(d).css(c)})},this.styleNodes=function(d,e){d=d.splitText();var f=e&&e.nodeName||"SPAN",g=!(!e||!e.expandClosestSibling),h=!(!e||!e.onlyPartialContains);if(d.isCollapsed())return[d.insertNode(F.create(f))];var i=F.makePredByNodeName(f),j=d.nodes(F.isText,{fullyContains:!0}).map(function(a){return F.singleChildAncestor(a,i)||F.wrap(a,f)});if(g){if(h){var k=d.nodes();i=b.and(i,function(a){return c.contains(k,a)})}return j.map(function(b){var d=F.withClosestSiblings(b,i),e=c.head(d),f=c.tail(d);return a.each(f,function(a,b){F.appendChildNodes(e,b.childNodes),F.remove(b)}),c.head(d)})}return j},this.current=function(b){var c=a(F.isText(b.sc)?b.sc.parentNode:b.sc),d=this.fromNode(c);if(d=a.extend(d,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikeThrough")?"strikethrough":"normal"}),b.isOnList()){var e=["circle","disc","disc-leading-zero","square"],f=a.inArray(d["list-style-type"],e)>-1;d["list-style"]=f?"unordered":"ordered"}else d["list-style"]="none";var g=F.ancestor(b.sc,F.isPara);if(g&&g.style["line-height"])d["line-height"]=g.style.lineHeight;else{var h=parseInt(d["line-height"],10)/parseInt(d["font-size"],10);d["line-height"]=h.toFixed(1)}return d.anchor=b.isOnAnchor()&&F.ancestor(b.sc,F.isAnchor),d.ancestors=F.listAncestor(b.sc,F.isEditable),d.range=b,d}},K=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var d=this,e=G.create().wrapBodyInlineWithPara(),f=e.nodes(F.isPara,{includeAncestor:!0}),g=c.clusterBy(f,b.peq2("parentNode"));a.each(g,function(b,e){var f=c.head(e);F.isLi(f)?d.wrapList(e,f.parentNode.nodeName):a.each(e,function(b,c){a(c).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})}),e.select()},this.outdent=function(){var d=this,e=G.create().wrapBodyInlineWithPara(),f=e.nodes(F.isPara,{includeAncestor:!0}),g=c.clusterBy(f,b.peq2("parentNode"));a.each(g,function(b,e){var f=c.head(e);F.isLi(f)?d.releaseList([e]):a.each(e,function(b,c){a(c).css("marginLeft",function(a,b){return b=parseInt(b,10)||0,b>25?b-25:""})})}),e.select()},this.toggleList=function(d){var e=this,f=G.create().wrapBodyInlineWithPara(),g=f.nodes(F.isPara,{includeAncestor:!0}),h=f.paraBookmark(g),i=c.clusterBy(g,b.peq2("parentNode"));if(c.find(g,F.isPurePara)){var j=[];a.each(i,function(a,b){j=j.concat(e.wrapList(b,d))}),g=j}else{var k=f.nodes(F.isList,{includeAncestor:!0}).filter(function(b){return!a.nodeName(b,d)});k.length?a.each(k,function(a,b){F.replace(b,d)}):g=this.releaseList(i,!0)}G.createFromParaBookmark(h,g).select()},this.wrapList=function(a,b){var d=c.head(a),e=c.last(a),f=F.isList(d.previousSibling)&&d.previousSibling,g=F.isList(e.nextSibling)&&e.nextSibling,h=f||F.insertAfter(F.create(b||"UL"),e);return a=a.map(function(a){return F.isPurePara(a)?F.replace(a,"LI"):a}),F.appendChildNodes(h,a),g&&(F.appendChildNodes(h,c.from(g.childNodes)),F.remove(g)),a},this.releaseList=function(b,d){var e=[];return a.each(b,function(b,f){var g=c.head(f),h=c.last(f),i=d?F.lastAncestor(g,F.isList):g.parentNode,j=i.childNodes.length>1?F.splitTree(i,{node:h.parentNode,offset:F.position(h)+1},{isSkipPaddingBlankHTML:!0}):null,k=F.splitTree(i,{node:g.parentNode,offset:F.position(g)},{isSkipPaddingBlankHTML:!0});f=d?F.listDescendant(k,F.isLi):c.from(k.childNodes).filter(F.isLi),(d||!F.isList(i.parentNode))&&(f=f.map(function(a){return F.replace(a,"P")})),a.each(c.from(f).reverse(),function(a,b){F.insertAfter(b,i)});var l=c.compact([i,k,j]);a.each(l,function(b,c){var d=[c].concat(F.listDescendant(c,F.isList));a.each(d.reverse(),function(a,b){F.nodeLength(b)||F.remove(b,!0)})}),e=e.concat(f)}),e}},L=function(){var b=new K;this.insertTab=function(a,b,c){var d=F.createText(new Array(c+1).join(F.NBSP_CHAR));b=b.deleteContents(),b.insertNode(d,!0),b=G.create(d,c),b.select()},this.insertParagraph=function(){var c=G.create();c=c.deleteContents(),c=c.wrapBodyInlineWithPara();var d,e=F.ancestor(c.sc,F.isPara);if(e){if(F.isEmpty(e)&&F.isLi(e))return void b.toggleList(e.parentNode.nodeName);d=F.splitTree(e,c.getStartPoint());var f=F.listDescendant(e,F.isEmptyAnchor);f=f.concat(F.listDescendant(d,F.isEmptyAnchor)),a.each(f,function(a,b){F.remove(b)})}else{var g=c.sc.childNodes[c.so];d=a(F.emptyPara)[0],g?c.sc.insertBefore(d,g):c.sc.appendChild(d)}G.create(d,0).normalize().select()}},M=function(){this.tab=function(a,b){var d=F.ancestor(a.commonAncestor(),F.isCell),e=F.ancestor(d,F.isTable),f=F.listDescendant(e,F.isCell),g=c[b?"prev":"next"](f,d);g&&G.create(g,0).select()},this.createTable=function(b,c,d){for(var e,f=[],g=0;b>g;g++)f.push("<td>"+F.blank+"</td>");e=f.join("");for(var h,i=[],j=0;c>j;j++)i.push("<tr>"+e+"</tr>");h=i.join("");var k=a("<table>"+h+"</table>");return d&&d.tableClassName&&k.addClass(d.tableClassName),k[0]}},N="bogus",O=function(b){var d=this,e=b.layoutInfo.editable,f=b.options,g=new J,h=new M,i=new L,j=new K,k=new I(e);this.initialize=function(){var a=f.keyMap[B.isMac?"mac":"pc"];this.bindKeyMap(a),e.on("keyup",function(a){b.triggerEvent("keyup",a)}).on("mouseup",function(a){b.triggerEvent("mouseup",a)}).on("input",function(a){b.triggerEvent("change",a)}).on("scroll",function(a){b.triggerEvent("scroll",a)}),f.height&&e.height(f.height)},this.destroy=function(){e.off("keydown")},this.bindKeyMap=function(a){e.on("keydown",function(b){var c=[];b.metaKey&&c.push("CMD"),b.ctrlKey&&!b.altKey&&c.push("CTRL"),b.shiftKey&&c.push("SHIFT");var g=C.nameFromCode[b.keyCode];g&&c.push(g);var h=a[c.join("+")];h?d[h]&&(d[h](f),b.preventDefault()):C.isEdit(b.keyCode)&&d.afterCommand(e)})},this.createRange=function(){return this.focus(),G.create()},this.saveRange=function(a){this.focus(),e.data("range",G.create()),a&&G.create().collapse().select()},this.restoreRange=function(){var a=e.data("range");a&&(a.select(),this.focus())},this.saveTarget=function(a){e.data("target",a)},this.clearTarget=function(){e.removeData("target")},this.restoreTarget=function(){return e.data("target");
},this.currentStyle=function(){var a=G.create();return a&&(a=a.normalize()),a?g.current(a):g.fromNode(e)},this.styleFromNode=function(a){return g.fromNode(a)},this.undo=function(){b.triggerEvent("before.command",e.html()),k.undo(),b.triggerEvent("change",e.html())},this.redo=function(){b.triggerEvent("before.command",e.html()),k.redo(),b.triggerEvent("change",e.html())};for(var l=this.beforeCommand=function(){b.triggerEvent("before.command",e.html()),d.focus()},m=this.afterCommand=function(a){k.recordUndo(),a||b.triggerEvent("change",e.html())},n=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],o=0,p=n.length;p>o;o++)this[n[o]]=function(a){return function(b){l(),document.execCommand(a,!1,b),m(!0)}}(n[o]);this.tab=function(){var a=this.createRange();a.isCollapsed()&&a.isOnCell()?h.tab(a):(l(),i.insertTab(e,a,f.tabSize),m())},this.untab=function(){var a=this.createRange();a.isCollapsed()&&a.isOnCell()&&h.tab(a,!0)},this.insertParagraph=function(){l(),i.insertParagraph(e),m()},this.insertOrderedList=function(){l(),j.insertOrderedList(e),m()},this.insertUnorderedList=function(){l(),j.insertUnorderedList(e),m()},this.indent=function(){l(),j.indent(e),m()},this.outdent=function(){l(),j.outdent(e),m()},this.insertImage=function(a,c){H.createImage(a,c).then(function(a){l(),a.css({display:"",width:Math.min(e.width(),a.width())}),G.create().insertNode(a[0]),G.createFromNodeAfter(a[0]).select(),m()}).fail(function(){b.triggerEvent("image.upload.error")})},this.insertNode=function(a){l(),G.create().insertNode(a),G.createFromNodeAfter(a).select(),m()},this.insertText=function(a){l();var b=G.create().insertNode(F.createText(a));G.create(b,F.nodeLength(b)).select(),m()},this.pasteHTML=function(a){l();var b=G.create().pasteHTML(a);G.createFromNodeAfter(c.last(b)).select(),m()},this.formatBlock=function(a){l(),a=B.isMSIE?"<"+a+">":a,document.execCommand("FormatBlock",!1,a),m()},this.formatPara=function(){l(),this.formatBlock("P"),m()};for(var o=1;6>=o;o++)this["formatH"+o]=function(a){return function(){this.formatBlock("H"+a)}}(o);this.fontSize=function(b){var d=G.create();if(d.isCollapsed()){var f=g.styleNodes(d),h=c.head(f);a(f).css({"font-size":b+"px"}),h&&!F.nodeLength(h)&&(h.innerHTML=F.ZERO_WIDTH_NBSP_CHAR,G.createFromNodeAfter(h.firstChild).select(),e.data(N,h))}else l(),a(g.styleNodes(d)).css({"font-size":b+"px"}),m()},this.insertHorizontalRule=function(){l();var b=G.create(),c=b.insertNode(a("<HR/>")[0]);c.nextSibling&&G.create(c.nextSibling,0).normalize().select(),m()},this.removeBogus=function(){var a=e.data(N);if(a){var b=c.find(c.from(a.childNodes),F.isText),d=b.nodeValue.indexOf(F.ZERO_WIDTH_NBSP_CHAR);-1!==d&&b.deleteData(d,1),F.isEmpty(a)&&F.remove(a),e.removeData(N)}},this.lineHeight=function(a){l(),g.stylePara(G.create(),{lineHeight:a}),m()},this.unlink=function(){var a=this.createRange();if(a.isOnAnchor()){var b=F.ancestor(a.sc,F.isAnchor);a=G.createFromNode(b),a.select(),l(),document.execCommand("unlink"),m()}},this.createLink=function(b){var d=b.url,e=b.text,h=b.isNewWindow,i=b.range||this.createRange(),j=i.toString()!==e;l(),f.onCreateLink&&(d=f.onCreateLink(d));var k=[];if(j){var n=i.insertNode(a("<A>"+e+"</A>")[0]);k.push(n)}else k=g.styleNodes(i,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});a.each(k,function(b,c){a(c).attr("href",d),h?a(c).attr("target","_blank"):a(c).removeAttr("target")});var o=G.createFromNodeBefore(c.head(k)),p=o.getStartPoint(),q=G.createFromNodeAfter(c.last(k)),r=q.getEndPoint();G.create(p.node,p.offset,r.node,r.offset).select(),m()},this.getLinkInfo=function(){this.focus();var b=G.create().expand(F.isAnchor),d=a(c.head(b.nodes(F.isAnchor)));return{range:b,text:b.toString(),isNewWindow:d.length?"_blank"===d.attr("target"):!1,url:d.length?d.attr("href"):""}},this.color=function(a){var b=a.foreColor,c=a.backColor;l(),b&&document.execCommand("foreColor",!1,b),c&&document.execCommand("backColor",!1,c),m()},this.insertTable=function(a){var b=a.split("x");l();var c=G.create().deleteContents();c.insertNode(h.createTable(b[0],b[1],f)),m()},this.floatMe=function(b){l();var c=a(this.restoreTarget());c.css("float",b),m()},this.resize=function(b){l();var c=a(this.restoreTarget());c.css({width:100*b+"%",height:""}),m()},this.resizeTo=function(a,b,c){var d;if(c){var e=a.y/a.x,f=b.data("ratio");d={width:f>e?a.x:a.y/f,height:f>e?a.x*f:a.y}}else d={width:a.x,height:a.y};b.css(d)},this.removeMedia=function(){l();var c=a(this.restoreTarget()).detach();b.triggerEvent("media.delete",c,e),m()},this.focus=function(){if(e.focus(),B.isFF){var a=G.create();if(!a||a.isOnEditable())return;G.createFromNode(e[0]).normalize().collapse().select()}},this.isEmpty=function(){return F.isEmpty(e[0])||F.emptyPara===e.html()}},P=function(b){var d,e=this,f=b.layoutInfo.editable;this.initialize=function(){B.isMSIE&&B.browserVersion>10||B.isFF?(d=a("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),f.on("keydown",function(a){a.ctrlKey&&a.keyCode===C.code.V&&(b.invoke("editor.saveRange"),d.focus(),setTimeout(function(){e.pasteByHook()},0))}),f.before(d)):f.on("paste",this.pasteByEvent)},this.pasteByHook=function(){var c=d[0].firstChild;if(F.isImg(c)){for(var e=c.src,f=atob(e.split(",")[1]),g=new Uint8Array(f.length),h=0;h<f.length;h++)g[h]=f.charCodeAt(h);var i=new Blob([g],{type:"image/png"});i.name="clipboard.png",b.invoke("editor.restoreRange"),b.invoke("editor.focus"),b.invoke("imageDialog.insertImages",[i])}else{var j=a("<div />").html(d.html()).html();b.invoke("editor.restoreRange"),b.invoke("editor.focus"),j&&b.invoke("editor.pasteHTML",j)}d.empty()},this.pasteByEvent=function(a){var d=a.originalEvent.clipboardData;if(d&&d.items&&d.items.length){var e=c.head(d.items);"file"===e.kind&&-1!==e.type.indexOf("image/")&&b.invoke("imageDialog.insertImages",[e.getAsFile()]),b.invoke("editor.afterCommand")}}},Q=function(b){var c=a(document),d=b.layoutInfo.editor,e=b.layoutInfo.editable,f=b.options,g=f.langInfo,h=a(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(d);this.initialize=function(){f.airMode||f.disableDragAndDrop?c.on("drop",function(a){a.preventDefault()}):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var f=a(),i=h.find(".note-dropzone-message");c.on("dragenter",function(a){var c=b.invoke("codeview.isActivated"),e=d.width()>0&&d.height()>0;c||f.length||!e||(d.addClass("dragover"),h.width(d.width()),h.height(d.height()),i.text(g.image.dragImageHere)),f=f.add(a.target)}).on("dragleave",function(a){f=f.not(a.target),f.length||d.removeClass("dragover")}).on("drop",function(){f=a(),d.removeClass("dragover")}),h.on("dragenter",function(){h.addClass("hover"),i.text(g.image.dropImage)}).on("dragleave",function(){h.removeClass("hover"),i.text(g.image.dragImageHere)}),h.on("drop",function(c){var d=c.originalEvent.dataTransfer;d&&d.files&&d.files.length?(c.preventDefault(),e.focus(),b.invoke("imageDialog.insertImages",d.files)):a.each(d.types,function(c,e){var f=d.getData(e);e.toLowerCase().indexOf("text")>-1?b.invoke("editor.pasteHTML",f):a(f).each(function(){b.invoke("editor.insertNode",this)})})}).on("dragover",!1)}};B.hasCodeMirror&&(B.isSupportAmd?require(["CodeMirror"],function(a){A=a}):A=window.CodeMirror);var R=function(a){var b=a.layoutInfo.editor,c=a.layoutInfo.editable,d=a.layoutInfo.codable,e=a.options;this.sync=function(){var a=this.isActivated();a&&B.hasCodeMirror&&d.data("cmEditor").save()},this.isActivated=function(){return b.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate()},this.activate=function(){if(d.val(F.html(c,e.prettifyHtml)),d.height(c.height()),a.invoke("toolbar.updateCodeview",!0),b.addClass("codeview"),d.focus(),B.hasCodeMirror){var f=A.fromTextArea(d[0],e.codemirror);if(e.codemirror.tern){var g=new A.TernServer(e.codemirror.tern);f.ternServer=g,f.on("cursorActivity",function(a){g.updateArgHints(a)})}f.setSize(null,c.outerHeight()),d.data("cmEditor",f)}},this.deactivate=function(){if(B.hasCodeMirror){var f=d.data("cmEditor");d.val(f.getValue()),f.toTextArea()}var g=F.value(d,e.prettifyHtml)||F.emptyPara,h=c.html()!==g;c.html(g),c.height(e.height?d.height():"auto"),b.removeClass("codeview"),h&&a.triggerEvent("change",c.html(),c),c.focus(),a.invoke("toolbar.updateCodeview",!1)}},S=24,T=function(b){var c=a(document),d=b.layoutInfo.statusbar,e=b.layoutInfo.editable;this.initialize=function(){var a=b.options;a.disableResizeEditor||d.on("mousedown",function(b){b.preventDefault(),b.stopPropagation();var d=e.offset().top-c.scrollTop();c.on("mousemove",function(b){var c=b.clientY-(d+S);c=a.minheight>0?Math.max(c,a.minheight):c,c=a.maxHeight>0?Math.min(c,a.maxHeight):c,e.height(c)}).one("mouseup",function(){c.off("mousemove")})})},this.destroy=function(){d.off()}},U=function(b){var c=b.layoutInfo.editor,d=b.layoutInfo.toolbar,e=b.layoutInfo.editable,f=b.layoutInfo.codable,g=a(window),h=a("html, body");this.toggle=function(){var a=function(a){e.css("height",a.h),f.css("height",a.h),f.data("cmeditor")&&f.data("cmeditor").setsize(null,a.h)};c.toggleClass("fullscreen");var i=c.hasClass("fullscreen");i?(e.data("orgHeight",e.css("height")),g.on("resize",function(){a({h:g.height()-d.outerHeight()})}).trigger("resize"),h.css("overflow","hidden")):(g.off("resize"),a({h:e.data("orgHeight")}),h.css("overflow","visible")),b.invoke("toolbar.updateFullscreen",i)}},V=function(b){var c=this,d=a(document),e=b.layoutInfo.note,f=b.layoutInfo.editingArea,g=b.options,h=a(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',g.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',g.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join(""));h.prependTo(f),this.initialize=function(){e.on("summernote.keyup summernote.mouseup summernote.change",function(a,b){c.update(b.target)}).on("summernote.scroll",function(){c.update(b.invoke("editor.restoreTarget"))}),h.on("mousedown",function(a){if(F.isControlSizing(a.target)){a.preventDefault(),a.stopPropagation(),b.invoke("imagePopover.hide");var e=h.find(".note-control-selection").data("target"),f=e.offset(),g=d.scrollTop();d.on("mousemove",function(a){b.invoke("editor.resizeTo",{x:a.clientX-f.left,y:a.clientY-(f.top-g)},e,!a.shiftKey),c.update(e[0])}).one("mouseup",function(){d.off("mousemove"),b.invoke("editor.afterCommand")}),e.data("ratio")||e.data("ratio",e.height()/e.width())}})},this.update=function(c){var d=h.find(".note-control-selection");if(F.isImg(c)){var e=a(c),f=e.position(),g={w:e.outerWidth(!0),h:e.outerHeight(!0)};d.css({display:"block",left:f.left,top:f.top,width:g.w,height:g.h}).data("target",e);var i=g.w+"x"+g.h;d.find(".note-control-selection-info").text(i)}else b.invoke("editor.clearTarget"),d.hide()},this.hide=function(){h.children().hide()}},W=function(d){var e=this,f=a.summernote.ui,g=d.layoutInfo.note,h=d.layoutInfo.toolbar,i=d.options,j=i.langInfo,k=b.invertObject(i.keyMap[B.isMac?"mac":"pc"]);this.representShortcut=function(a){var b=k[a];return B.isMac&&(b=b.replace("CMD","⌘").replace("SHIFT","⇧")),b=b.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+b+")"},this.initialize=function(){g.on("summernote.keyup summernote.mouseup summernote.change",function(){e.updateCurrentStyle()}),h.append(f.buttonGroup([f.button({className:"dropdown-toggle",contents:'<i class="fa fa-magic"/> <span class="caret"/>',tooltip:j.style.style,data:{toggle:"dropdown"}}),f.dropdown({className:"dropdown-style",items:i.styleTags,click:d.createInvokeHandler("editor.formatBlock")})]).render()),h.append(f.buttonGroup([f.button({className:"note-btn-bold",contents:'<i class="fa fa-bold"/>',tooltip:j.font.bold+this.representShortcut("bold"),click:d.createInvokeHandler("editor.bold")}),f.button({className:"note-btn-italic",contents:'<i class="fa fa-italic"/>',tooltip:j.font.italic+this.representShortcut("italic"),click:d.createInvokeHandler("editor.italic")}),f.button({className:"note-btn-underline",contents:'<i class="fa fa-underline"/>',tooltip:j.font.underline+this.representShortcut("underline"),click:d.createInvokeHandler("editor.underline")}),f.button({contents:'<i class="fa fa-eraser"/>',tooltip:j.font.clear+this.representShortcut("removeFormat"),click:d.createInvokeHandler("editor.removeFormat")})]).render()),h.append(f.buttonGroup([f.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> <span class="caret"/>',tooltip:j.font.name,data:{toggle:"dropdown"}}),f.dropdownCheck({className:"dropdown-fontname",items:i.fontNames.filter(function(a){return B.isFontInstalled(a)||c.contains(i.fontNamesIgnoreCheck,a)}),click:d.createInvokeHandler("editor.fontName")})]).render()),h.append(f.buttonGroup([f.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/> <span class="caret"/>',tooltip:j.font.size,data:{toggle:"dropdown"}}),f.dropdownCheck({className:"dropdown-fontsize",items:i.fontSizes,click:d.createInvokeHandler("editor.fontSize")})]).render()),h.append(f.buttonGroup({className:"note-color",children:[f.button({contents:'<i class="fa fa-font note-recent-color"/>',tooltip:j.color.recent,click:d.createInvokeHandler("editor.color"),callback:function(a){var b=a.find(".note-recent-color");b.css({"background-color":"yellow"}).data("value",{backColor:"yellow"})}}),f.button({className:"dropdown-toggle",contents:'<span class="caret"/>',tooltip:j.color.more,data:{toggle:"dropdown"}}),f.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+j.color.background+"</div>",'  <div class="note-color-reset" data-event="backColor" data-value="inherit">'+j.color.transparent+"</div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+j.color.foreground+"</div>",'  <div class="note-color-reset" data-event="foreColor" data-value="inherit">'+j.color.resetToDefault+"</div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(b){b.find(".note-holder").each(function(){var b=a(this);b.append(f.palette({colors:i.colors,eventName:b.data("event")}).render())})},click:function(b){var c=a(b.target),e=c.data("event"),f=c.data("value");if(e&&f){var g="backColor"===e?"background-color":"color",h=c.closest(".note-color").find(".note-recent-color"),i=h.data("value");i[e]=f,h.data("value",i).css(g,f),d.invoke("editor."+e,f)}}})]}).render()),h.append(f.buttonGroup({className:"note-para",children:[f.button({contents:'<i class="fa fa-list-ul"/>',tooltip:j.lists.unordered+this.representShortcut("insertUnorderedList"),click:d.createInvokeHandler("editor.insertUnorderedList")}),f.button({contents:'<i class="fa fa-list-ol"/>',tooltip:j.lists.ordered+this.representShortcut("insertOrderedList"),click:d.createInvokeHandler("editor.insertOrderedList")}),f.buttonGroup([f.button({className:"dropdown-toggle",contents:'<i class="fa fa-align-left"/> <span class="caret"/>',tooltip:j.paragraph.paragraph,data:{toggle:"dropdown"}}),f.dropdown([f.buttonGroup({className:"note-align",children:[f.button({contents:'<i class="fa fa-align-left"/>',tooltip:j.paragraph.left+this.representShortcut("justifyLeft"),click:d.createInvokeHandler("editor.justifyLeft")}),f.button({contents:'<i class="fa fa-align-center"/>',tooltip:j.paragraph.center+this.representShortcut("justifyCenter"),click:d.createInvokeHandler("editor.justifyCenter")}),f.button({contents:'<i class="fa fa-align-right"/>',tooltip:j.paragraph.right+this.representShortcut("justifyRight"),click:d.createInvokeHandler("editor.justifyRight")}),f.button({contents:'<i class="fa fa-align-justify"/>',tooltip:j.paragraph.justify+this.representShortcut("justifyFull"),click:d.createInvokeHandler("editor.justifyFull")})]}),f.buttonGroup({className:"note-list",children:[f.button({contents:'<i class="fa fa-outdent"/>',tooltip:j.paragraph.outdent+this.representShortcut("outdent"),click:d.createInvokeHandler("editor.outdent")}),f.button({contents:'<i class="fa fa-indent"/>',tooltip:j.paragraph.indent+this.representShortcut("indent"),click:d.createInvokeHandler("editor.indent")})]})])])]}).render()),h.append(f.buttonGroup([f.button({className:"dropdown-toggle",contents:'<i class="fa fa-text-height"/> <span class="caret"/>',tooltip:j.font.height,data:{toggle:"dropdown"}}),f.dropdownCheck({items:i.lineHeights,className:"dropdown-line-height",click:d.createInvokeHandler("editor.lineHeight")})]).render()),h.append(f.buttonGroup([f.button({className:"dropdown-toggle",contents:'<i class="fa fa-table"/> <span class="caret"/>',tooltip:j.table.table,data:{toggle:"dropdown"}}),f.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(a){var b=a.find(".note-dimension-picker-mousecatcher");b.css({width:i.insertTableMaxSize.col+"em",height:i.insertTableMaxSize.row+"em"}).click(d.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler)}}).render()),h.append(f.buttonGroup([f.button({contents:'<i class="fa fa-link"/>',tooltip:j.link.link,click:d.createInvokeHandler("linkDialog.show")}),f.button({contents:'<i class="fa fa-picture-o"/>',tooltip:j.image.image,click:d.createInvokeHandler("imageDialog.show")}),f.button({contents:'<i class="fa fa-minus"/>',tooltip:j.hr.insert+this.representShortcut("insertHorizontalRule"),click:d.createInvokeHandler("editor.insertHorizontalRule")})]).render()),h.append(f.buttonGroup([f.button({className:"btn-fullscreen",contents:'<i class="fa fa-arrows-alt"/>',tooltip:j.options.fullscreen,click:d.createInvokeHandler("fullscreen.toggle")}),f.button({className:"btn-codeview",contents:'<i class="fa fa-code"/>',tooltip:j.options.codeview,click:d.createInvokeHandler("codeview.toggle")})]).render()),this.updateCurrentStyle()},this.destroy=function(){h.children().remove()},this.updateCurrentStyle=function(){var b=d.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===b["font-bold"]},".note-btn-italic":function(){return"italic"===b["font-italic"]},".note-btn-underline":function(){return"underline"===b["font-underline"]}}),b["font-family"]){var e=b["font-family"].split(",").map(function(a){return a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),f=c.find(e,function(a){return B.isFontInstalled(a)||c.contains(i.fontNamesIgnoreCheck,a)});h.find(".dropdown-fontname li a").each(function(){var b=a(this).data("value")+""==f+"";this.className=b?"checked":""}),h.find(".note-current-fontname").text(f)}if(b["font-size"]){var g=b["font-size"];h.find(".dropdown-fontsize li a").each(function(){var b=a(this).data("value")+""==g+"";this.className=b?"checked":""}),h.find(".note-current-fontsize").text(g)}if(b["line-height"]){var j=b["line-height"];h.find(".dropdown-line-height li a").each(function(){var b=a(this).data("value")+""==j+"";this.className=b?"checked":""})}},this.updateBtnStates=function(b){a.each(b,function(a,b){f.toggleBtnActive(h.find(a),b())})},this.tableMoveHandler=function(b){var c,d=18,e=a(b.target.parentNode),f=e.next(),g=e.find(".note-dimension-picker-mousecatcher"),h=e.find(".note-dimension-picker-highlighted"),j=e.find(".note-dimension-picker-unhighlighted");if(void 0===b.offsetX){var k=a(b.target).offset();c={x:b.pageX-k.left,y:b.pageY-k.top}}else c={x:b.offsetX,y:b.offsetY};var l={c:Math.ceil(c.x/d)||1,r:Math.ceil(c.y/d)||1};h.css({width:l.c+"em",height:l.r+"em"}),g.data("value",l.c+"x"+l.r),3<l.c&&l.c<i.insertTableMaxSize.col&&j.css({width:l.c+1+"em"}),3<l.r&&l.r<i.insertTableMaxSize.row&&j.css({height:l.r+1+"em"}),f.html(l.c+" x "+l.r)},this.updateFullscreen=function(a){f.toggleBtnActive(h.find(".btn-fullscreen"),a)},this.updateCodeview=function(a){f.toggleBtnActive(h.find(".btn-codeview"),a),a?this.deactivate():this.activate()},this.activate=function(){var a=h.find("button").not(".btn-codeview");f.toggleBtn(a,!0)},this.deactivate=function(){var a=h.find("button").not(".btn-codeview");f.toggleBtn(a,!1)}},X=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.options,g=f.langInfo;this.initialize=function(){var b=f.dialogsInBody?a(document.body):e,c='<div class="form-group"><label>'+g.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+g.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(f.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+g.link.openInNewWindow+"</label></div>"),h='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+g.link.insert+"</button>";b.append(d.dialog({className:"link-dialog",title:g.link.insert,body:c,footer:h}).render()),this.$dialog=b.find(".link-dialog")},this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===C.code.ENTER&&b.trigger("click")})},this.showLinkDialog=function(b){return a.Deferred(function(a){var e=c.$dialog.find(".note-link-text"),f=c.$dialog.find(".note-link-url"),g=c.$dialog.find(".note-link-btn"),h=c.$dialog.find("input[type=checkbox]");d.onDialogShown(c.$dialog,function(){e.val(b.text),e.on("input",function(){d.toggleBtn(g,e.val()&&f.val()),b.text=e.val()}),b.url||(b.url=b.text||"http://",d.toggleBtn(g,b.text)),f.on("input",function(){d.toggleBtn(g,e.val()&&f.val()),b.text||e.val(f.val())}).val(b.url).trigger("focus").trigger("select"),c.bindEnterKey(f,g),c.bindEnterKey(e,g),h.prop("checked",b.isNewWindow),g.one("click",function(d){d.preventDefault(),a.resolve({range:b.range,url:f.val(),text:e.val(),isNewWindow:h.is(":checked")}),c.$dialog.modal("hide")})}),d.onDialogHidden(c.$dialog,function(){e.off("input keypress"),f.off("input keypress"),g.off("click"),"pending"===a.state()&&a.reject()}),d.showDialog(c.$dialog)}).promise()},this.show=function(){var a=b.invoke("editor.getLinkInfo");b.invoke("editor.saveRange"),this.showLinkDialog(a).then(function(a){b.invoke("editor.restoreRange"),b.invoke("editor.createLink",a)}).fail(function(){b.invoke("editor.restoreRange")})}},Y=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.note,f=b.layoutInfo.editingArea,g=b.options.langInfo,h=d.popover({children:[d.buttonGroup([d.button({contents:'<i class="fa fa-link"/>',tooltip:g.link.edit,click:b.createInvokeHandler("linkDialog.show")}),d.button({contents:'<i class="fa fa-unlink"/>',tooltip:g.link.unlink,click:b.createInvokeHandler("editor.unlink")})])]}).render();f.append(h),this.initialize=function(){e.on("summernote.keyup summernote.mouseup summernote.change",function(a,b){c.update(b.target)}).on("summernote.scroll",function(){c.update(b.invoke("editor.restoreTarget"))})},this.posFromPlaceholder=function(b){var c=a(b),d=c.position(),e=c.outerHeight(!0);return{left:d.left,top:d.top+e}},this.update=function(b){if(F.isAnchor(b)){var c=h.find("a"),d=a(b).attr("href"),e=a(b).attr("target");c.attr("href",d).html(d),e?c.attr("target","_blank"):c.removeAttr("target");var f=this.posFromPlaceholder(b);h.css({display:"block",left:f.left,top:f.top})}else h.hide()},this.hide=function(){h.hide()}},Z=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.options,g=f.langInfo;this.initialize=function(){var b=f.dialogsInBody?a(document.body):e,c="";if(f.maximumImageFileSize){var h=Math.floor(Math.log(f.maximumImageFileSize)/Math.log(1024)),i=1*(f.maximumImageFileSize/Math.pow(1024,h)).toFixed(2)+" "+" KMGTP"[h]+"B";c="<small>"+g.image.maximumFileSize+" : "+i+"</small>"}var j='<div class="form-group note-group-select-from-files"><label>'+g.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+c+'</div><div class="form-group"><label>'+g.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',k='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+g.image.insert+"</button>";b.append(d.dialog({className:"note-image-dialog",title:g.image.insert,body:j,footer:k}).render()),this.$dialog=b.find(".note-image-dialog")},this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===C.code.ENTER&&b.trigger("click")})},this.insertImages=function(c){var d=f.callbacks;d.onImageUpload?b.triggerEvent("image.upload",c):a.each(c,function(a,c){var d=c.name;f.maximumImageFileSize&&f.maximumImageFileSize<c.size?b.triggerEvent("image.upload.error",g.image.maximumFileSizeError):H.readFileAsDataURL(c).then(function(a){b.invoke("editor.insertImage",a,d)}).fail(function(){b.triggerEvent("image.upload.error")})})},this.show=function(){b.invoke("editor.saveRange"),this.showImageDialog().then(function(a){b.invoke("editor.restoreRange"),"string"==typeof a?b.invoke("editor.insertImage",a):c.insertImages(a)}).fail(function(){b.invoke("editor.restoreRange")})},this.showImageDialog=function(){return a.Deferred(function(a){var b=c.$dialog.find(".note-image-input"),e=c.$dialog.find(".note-image-url"),f=c.$dialog.find(".note-image-btn");d.onDialogShown(c.$dialog,function(){b.replaceWith(b.clone().on("change",function(){a.resolve(this.files||this.value),d.hideDialog(c.$dialog)}).val("")),f.click(function(b){b.preventDefault(),a.resolve(e.val()),d.hideDialog(c.$dialog)}),e.on("keyup paste",function(a){var b;b="paste"===a.type?a.originalEvent.clipboardData.getData("text"):e.val(),d.toggleBtn(f,b)}).val("").trigger("focus"),c.bindEnterKey(e,f)}),d.onDialogHidden(c.$dialog,function(){b.off("change"),e.off("keyup paste keypress"),f.off("click"),"pending"===a.state()&&a.reject()}),d.showDialog(c.$dialog)})}},$=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.note,f=b.layoutInfo.editingArea,g=b.options.langInfo,h=d.popover({className:"note-image-popover",children:[d.buttonGroup([d.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:g.image.resizeFull,click:b.createInvokeHandler("editor.resize","1")}),d.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:g.image.resizeHalf,click:b.createInvokeHandler("editor.resize","0.5")}),d.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:g.image.resizeQuarter,click:b.createInvokeHandler("editor.resize","0.25")})]),d.buttonGroup([d.button({contents:'<i class="fa fa-align-left"/>',tooltip:g.image.floatLeft,click:b.createInvokeHandler("editor.floatMe","left")}),d.button({contents:'<i class="fa fa-align-right"/>',tooltip:g.image.floatRight,click:b.createInvokeHandler("editor.floatMe","right")}),d.button({contents:'<i class="fa fa-align-justify"/>',tooltip:g.image.floatNone,click:b.createInvokeHandler("editor.floatMe","none")})]),d.buttonGroup([d.button({contents:'<i class="fa fa-trash-o"/>',tooltip:g.image.remove,click:b.createInvokeHandler("editor.removeMedia")})])]}).render();f.append(h),this.initialize=function(){e.on("summernote.keyup summernote.mouseup summernote.change",function(a,b){c.update(b.target)}).on("summernote.scroll",function(){c.update(b.invoke("editor.restoreTarget"))})},this.posFromPlaceholder=function(b){var c=a(b),d=c.position(),e=c.outerHeight(!0);return{left:d.left,top:d.top+e}},this.update=function(a){if(F.isImg(a)){var c=this.posFromPlaceholder(a);h.css({display:"block",left:c.left,top:c.top}),b.invoke("editor.saveTarget",a)}else h.hide()},this.hide=function(){h.hide()}};a.summernote=a.extend(a.summernote,{version:"0.7.0",ui:u,lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}},options:{modules:{editor:O,clipboard:P,dropzone:Q,codeview:R,statusbar:T,fullscreen:U,handle:V,toolbar:W,linkDialog:X,linkPopover:Y,imageDialog:Z,imagePopover:$},lang:"en-US",width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2",
"CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule"}}}})});